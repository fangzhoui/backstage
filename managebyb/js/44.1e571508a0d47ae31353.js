webpackJsonp([44],{294:function(e,t,a){var n=a(9)(a(869),a(993),null,null);e.exports=n.exports},422:function(e,t,a){"use strict";var n=(a(40),a(62)),r={createToken:"api/user/token/create",login:"management/api/manager/login",imageUrl:"api/common/qiniuBaseUrl",managerList:"management/api/manager/list",managerDelete:"management/api/manager/delete",managerInsert:"management/api/manager/insert",managerLogout:"management/api/manager/logout",blackList:"management/api/userDeny/list",blackInsert:"management/api/userDeny/insert",blackDelete:"management/api/userDeny/delete"};t.a={createToken:function(e){return n.a.post(r.createToken,e)},login:function(e){return n.a.post(r.login,e)},imageUrl:function(e){return n.a.get(r.imageUrl,e)},managerList:function(e){return n.a.get(r.managerList,e)},managerDelete:function(e){return n.a.post(r.delete,e)},managerInsert:function(e){return n.a.post(r.managerInsert,e)},managerLogout:function(e){return n.a.post(r.managerLogout,e)},blackList:function(e){return n.a.get(r.blackList,e)},blackInsert:function(e){return n.a.post(r.blackInsert,e)},blackDelete:function(e){return n.a.post(r.blackDelete,e)}}},869:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(65),r=a.n(n),o=a(422);t.default={name:"black-list",data:function(){return{tableData:[],dialog:!1,addItemForm:{phone:"",description:""},rules:{phone:[{required:!0,message:"请输入电话",trigger:"blur"}],description:[{required:!0,message:"请输入描述",trigger:"blur"}]}}},methods:{time:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getList:function(){var e=this;o.a.blackList().then(function(t){var a=t.data.data,n=[],o=!0,i=!1,l=void 0;try{for(var s,c=r()(a);!(o=(s=c.next()).done);o=!0){var u=s.value,d={phone:u.phone,description:u.description,id:u.id,createAt:e.time(u.createAt)};n.push(d)}}catch(e){i=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw l}}e.tableData=n})},deleteItem:function(e){var t=this;this.$confirm("是否要删除这个黑名单人物？").then(function(){o.a.blackDelete({id:e}).then(function(e){0==e.data.code&&(t.$message("您已成功删除了一条黑名单记录"),t.getList())}).catch(function(){})})},addItem:function(){this.dialog=!0},saveItem:function(){var e=this;this.$refs.addItemForm.validate(function(t){if(!t)return void e.$message("请输入完整信息");o.a.blackInsert(e.addItemForm).then(function(t){if(0!=t.data.code)return void e.$message("当前网络不佳，请稍后再试");e.getList(),e.$refs.addItemForm.resetFields(),e.$message("新增了一条黑名单记录"),e.dialog=!1})})}},mounted:function(){this.getList()}}},993:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"success"},on:{click:e.addItem}},[e._v("新增")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"phone",label:"电话",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",width:"100",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createAt",label:"时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"todo",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.deleteItem(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增黑名单记录",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"addItemForm",attrs:{"label-width":"80px",model:e.addItemForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{model:{value:e.addItemForm.phone,callback:function(t){e.$set(e.addItemForm,"phone",t)},expression:"addItemForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"description"}},[a("el-input",{model:{value:e.addItemForm.description,callback:function(t){e.$set(e.addItemForm,"description",t)},expression:"addItemForm.description"}})],1)],1)],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveItem}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]}}});