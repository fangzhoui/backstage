webpackJsonp([37],{1015:function(t,e,a){var r=a(907);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(11)("755d214a",r,!0)},263:function(t,e,a){a(1015);var r=a(9)(a(838),a(963),"data-v-14c32ce9",null);t.exports=r.exports},320:function(t,e,a){"use strict";function r(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var r in a)if(new RegExp("("+r+")").test(e)){var i=a[r]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?i:s(i))}return e}function s(t){return("00"+t).substr(t.length)}function i(t){var e=t,a=e[0].getFullYear(),r=e[1].getFullYear(),s=e[0].getMonth()+1<10?"0"+(e[0].getMonth()+1):e[0].getMonth()+1,i=e[1].getMonth()+1<10?"0"+(e[1].getMonth()+1):e[1].getMonth()+1;return{begin:a+"-"+s+"-"+(e[0].getDate()<10?"0"+e[0].getDate():e[0].getDate())+" 00:00:00",end:r+"-"+i+"-"+(e[1].getDate()<10?"0"+e[1].getDate():e[1].getDate())+" 23:59:59"}}e.a=r,e.b=i},342:function(t,e,a){"use strict";var r=a(62),s={history:"management/api/historyRecord/list",fromKeyList:"management/api/user/fromKeyList",userList:"management/api/user/list",export:"management/api/user/export",userDetail:"management/api/user/userDetail",groupList:"management/api/click/groupList",recordList:"management/api/click/recordList",clickList:"management/api/click/clickList",pageCountFromKeyList:"management/api/click/fromKeyList",pageCountExport:"management/api/click/recordExport",productClickList:"management/api/click/productClickList",productList:"management/api/click/productList",productRecordExport:"management/api/click/productRecordExport",productRecordList:"management/api/click/productRecordList",qrRecordList:"management/api/attentionRecord/list",gameDownloadCount:"management/api/game/downloadCount",changeDownloadCount:"management/api/game/changeDownloadCount"};e.a={history:function(t){return r.a.get(s.history,t)},fromKeyList:function(t){return r.a.get(s.fromKeyList,t)},userList:function(t){return r.a.get(s.userList,t)},export:function(t){return r.a.get(s.export,t)},userDetail:function(t){return r.a.get(s.userDetail,t)},groupList:function(t){return r.a.get(s.groupList,t)},recordList:function(t){return r.a.get(s.recordList,t)},clickList:function(t){return r.a.get(s.clickList,t)},pageCountFromKeyList:function(t){return r.a.get(s.pageCountFromKeyList,t)},pageCountExport:function(t){return r.a.get(s.pageCountExport,t)},productClickList:function(t){return r.a.get(s.productClickList,t)},productList:function(t){return r.a.get(s.productList,t)},productRecordExport:function(t){return r.a.get(s.productRecordExport,t)},productRecordList:function(t){return r.a.get(s.productRecordList,t)},qrRecordList:function(t){return r.a.get(s.qrRecordList,t)},gameDownloadCount:function(t){return r.a.get(s.gameDownloadCount,t)},changeDownloadCount:function(t){return r.a.post(s.changeDownloadCount,t)}}},838:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(65),s=a.n(r),i=a(66),n=a.n(i),o=a(342),l=a(320);e.default={name:"history-page",data:function(){return{userDetail:!1,loading:!1,pageSize:10,page:"",time:"",phone:"",fromKey:"",currentpage:1,tableData:[],dataTotal:null,timeState:!1,searchState:!1,fromKeySelect:[],avatarSelect:"",avatarList:[{value:"0",label:"注册用户"},{value:"1",label:"管理员"},{value:"2",label:"游客"}],userDetailMes:{userName:"",fromKey:"",phone:"",createAt:"",userType:"",wxid:"",nickName:"",adressList:[]}}},watch:{userDetail:function(t,e){t||(this.userDetailMes={userName:"",fromKey:"",phone:"",createAt:"",userType:"",wxid:"",nickName:"",adressList:[]})}},methods:{getFromkey:function(){var t=this;o.a.fromKeyList().then(function(e){t.fromKeySelect=e.data.data})},search:function(){var t={pageSize:this.pageSize},e=this.choseObj();n()(t,e),this.getList(t)},getList:function(t){var e=this;this.loading=!0,o.a.userList(t).then(function(t){var r=[],i=t.data.data.list,n=!0,o=!1,c=void 0;try{for(var u,d=s()(i);!(n=(u=d.next()).done);n=!0){var p=u.value,m=new Date(p.createAt),h={id:p.id,createAt:a.i(l.a)(m,"yyyy-MM-dd"),phone:p.phone};try{h.userName=p.profile.nickname}catch(t){h.userName=p.username}try{h.fromKey=p.profile.fromKey}catch(t){h.fromKey=""}0==p.role?h.role="注册用户":1==p.role?h.role="管理员":2==p.role&&(h.role="游客"),r.push(h)}}catch(t){o=!0,c=t}finally{try{!n&&d.return&&d.return()}finally{if(o)throw c}}e.loading=!1,e.tableData=r,e.dataTotal=t.data.data.total})},userCurrentChange:function(t){this.page=t;var e={page:t,pageSize:this.pageSize},a=this.choseObj();n()(e,a),this.getList(e)},exportFn:function(){var t=this,e={},a=this.choseObj();n()(e,a),o.a.export(e).then(function(){t.$confirm("是否下载？").then(function(t){var e=sessionStorage.getItem("exportUrl");window.location.href=e}).catch(function(){})})},getDetail:function(t,e){var a=this,r={id:e.id};o.a.userDetail(r).then(function(t){if("0"==t.data.code){var e=t.data.data;if(0==e.user.role||1==e.user.role)a.userDetailMes.userName=e.user.username;else try{a.userDetailMes.userName=e.user.profile.nickname}catch(t){a.userDetailMes.userName=""}try{a.userDetailMes.fromKey=e.user.profile.fromKey}catch(t){a.userDetailMes.fromKey=""}if(a.userDetailMes.phone=e.user.phone,a.userDetailMes.createAt=e.user.createAtString,0==e.user.role?a.userDetailMes.userType="注册用户":1==e.user.role?a.userDetailMes.userType="管理员":2==e.user.role&&(a.userDetailMes.userType="游客"),2==e.user.role){a.userDetailMes.wxid=e.user.username;try{a.userDetailMes.nickName=e.user.profile.nickname}catch(t){a.userDetailMes.nickName=""}}e.addressList.forEach(function(t){var e={adress:t.provinceName+t.cityName+t.districtName+t.address+","+t.cityId,user:t.receiver,phone:t.phone};a.userDetailMes.adressList.push(e)}),a.userDetail=!0}})},hideUserDetail:function(){this.userDetail=!1},choseObj:function(){var t={};if(""!=this.phone){if(this.phone=this.phone.trim(),!this.phone.match(/^1[35678]\d{9}$/g))return this.$message("这不是正确的电话号码哦"),void(this.phone="");var e={phone:this.phone};n()(t,e)}if(""!=this.fromKey&&"all"!=this.fromKey&&(t.fromKey=this.fromKey),""!=this.avatarSelect&&"all"!=this.avatarSelect&&(t.role=Number(this.avatarSelect)),""!=this.time&&this.time){var r=a.i(l.b)(this.time);t.timeBegin=r.begin,t.timeEnd=r.end}return t}},mounted:function(){this.getList({pageSize:this.pageSize}),this.getFromkey()}}},907:function(t,e,a){e=t.exports=a(7)(),e.push([t.i,".history_body[data-v-14c32ce9]{margin-top:20px}.pagenation_pane[data-v-14c32ce9]{padding-top:10px;display:flex;align-items:center;justify-content:center}.user_table[data-v-14c32ce9]{margin:0 auto;border-right:1px solid #333;border-bottom:1px solid #333}.user_table td[data-v-14c32ce9]{border-left:1px solid #333;border-top:1px solid #333}.table_title[data-v-14c32ce9]{width:640px;margin:0 auto}.paT[data-v-14c32ce9]{padding-top:20px}.user_table td[data-v-14c32ce9]{height:32px;background:#fff}.user_table .tdT[data-v-14c32ce9]{background:#eee;text-align:center}.user_table .tdC[data-v-14c32ce9]{text-indent:1em}.table_adress[data-v-14c32ce9]{max-width:640px;max-height:160px;overflow-y:auto;margin:0 auto}.table_item[data-v-14c32ce9]{border:1px solid #999;padding:10px}.item_span[data-v-14c32ce9]{padding-right:20px}",""])},963:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),t._v(" 统计管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("用户统计")])],1)],1),t._v(" "),a("div",{staticClass:"history_body"},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",placeholder:"选择日期范围"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"手机号"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"来源"},model:{value:t.fromKey,callback:function(e){t.fromKey=e},expression:"fromKey"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),t._v(" "),t._l(t.fromKeySelect,function(t,e){return a("el-option",{attrs:{label:t,value:t}})})],2)],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"角色"},model:{value:t.avatarSelect,callback:function(e){t.avatarSelect=e},expression:"avatarSelect"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),t._v(" "),t._l(t.avatarList,function(t,e){return a("el-option",{attrs:{label:t.label,value:t.value}})})],2)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("el-button",{on:{click:t.exportFn}},[t._v("导出")])],1)],1)],1),t._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body.loak",value:t.loading,expression:"loading",modifiers:{body:!0,loak:!0}}],staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话"}}),t._v(" "),a("el-table-column",{attrs:{prop:"role",width:"180",label:"角色"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fromKey",width:"180",label:"来源"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createAt",width:"240",label:"时间"}}),t._v(" "),a("el-table-column",{attrs:{width:"120",label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){t.getDetail(e.$index,e.row)}}},[t._v("查看详情")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagenation_pane"},[a("el-pagination",{attrs:{small:"",layout:"total, prev, pager, next","page-size":t.pageSize,"current-page":t.currentpage,total:t.dataTotal},on:{"current-change":t.userCurrentChange}})],1)])],1),t._v(" "),a("el-dialog",{attrs:{visible:t.userDetail},on:{"update:visible":function(e){t.userDetail=e}}},[a("h3",{staticClass:"table_title"},[t._v("基本资料")]),t._v(" "),a("table",{staticClass:"user_table",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[a("tr",[a("td",{staticClass:"tdT",attrs:{width:"80"}},[t._v("用户名")]),t._v(" "),a("td",{staticClass:"tdC",attrs:{width:"240"}},[t._v(t._s(t.userDetailMes.userName))]),t._v(" "),a("td",{staticClass:"tdT",attrs:{width:"80"}},[t._v("来源")]),t._v(" "),a("td",{staticClass:"tdC",attrs:{width:"240"}},[t._v(t._s(t.userDetailMes.fromKey))])]),t._v(" "),a("tr",[a("td",{staticClass:"tdT",attrs:{width:"80"}},[t._v("手机号")]),t._v(" "),a("td",{staticClass:"tdC",attrs:{width:"240"}},[t._v(t._s(t.userDetailMes.phone))]),t._v(" "),a("td",{staticClass:"tdT",attrs:{width:"80"}},[t._v("注册时间")]),t._v(" "),a("td",{staticClass:"tdC",attrs:{width:"240"}},[t._v(t._s(t.userDetailMes.createAt))])]),t._v(" "),a("tr",[a("td",{staticClass:"tdT",attrs:{width:"80"}},[t._v("角色")]),t._v(" "),a("td",{staticClass:"tdC",attrs:{width:"240"}},[t._v(t._s(t.userDetailMes.userType))]),t._v(" "),a("td",{staticClass:"tdT",attrs:{width:"80"}}),t._v(" "),a("td",{staticClass:"tdC",attrs:{width:"240"}})]),t._v(" "),a("tr",[a("td",{staticClass:"tdT",attrs:{width:"80"}},[t._v("微信")]),t._v(" "),a("td",{staticClass:"tdC",attrs:{width:"240"}},[t._v(t._s(t.userDetailMes.wxid))]),t._v(" "),a("td",{staticClass:"tdT",attrs:{width:"80"}},[t._v("微信昵称")]),t._v(" "),a("td",{staticClass:"tdC",attrs:{width:"240"}},[t._v(t._s(t.userDetailMes.nickName))])])]),t._v(" "),a("h3",{staticClass:"table_title paT"},[t._v("地址")]),t._v(" "),a("div",{staticClass:"table_adress"},t._l(t.userDetailMes.adressList,function(e){return a("div",{staticClass:"table_item"},[a("p",{staticClass:"adress_item"},[t._v("地址: "+t._s(e.adress))]),t._v(" "),a("p",{staticClass:"adress_item"},[a("span",{staticClass:"item_span"},[t._v("收件人: "+t._s(e.user))]),t._v(" "),a("span",{staticClass:"item_span"},[t._v("手机: "+t._s(e.phone))])])])})),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.hideUserDetail}},[t._v("关 闭")])],1)])],1)},staticRenderFns:[]}}});