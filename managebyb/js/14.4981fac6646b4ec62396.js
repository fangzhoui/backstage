webpackJsonp([14],{1007:function(e,t,i){var a=i(899);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(11)("7ad9f47c",a,!0)},295:function(e,t,i){i(1007);var a=i(9)(i(870),i(955),"data-v-0af70ecd",null);e.exports=a.exports},313:function(e,t,i){i(318);var a=i(9)(i(314),i(317),"data-v-9679b6b8",null);e.exports=a.exports},314:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(22),o=i.n(a),n=i(63),s=i.n(n),r=i(64),l=i(26);t.default={name:"upload-img-pane",components:{"image-card":s.a},data:function(){return{imageUrl:"",showIcon:!0}},computed:{imgUrl:function(){return sessionStorage.getItem("imageUrl")+"/"+this.imageUrl}},props:{group:{type:String,default:"common"}},methods:o()({},i.i(l.b)(["set_banner_img"]),{uploadFn:function(){var e=this;if(this.showIcon=!1,this.$refs.imgUpload.files.length>0){var t=this.$refs.imgUpload.files[0],i=t.name.split("."),a=i[0],o={name:a,group:this.group,file:t};r.a.insert(o).then(function(t){0==t.data.code?(e.showIcon=!0,e.$message.success("上传成功"),e.imageUrl=t.data.data,e.set_banner_img(t.data.data),e.$emit("callbackFn")):e.$message.error("当期网络不佳，请重试")}).catch(function(){e.showIcon=!0})}else this.showIcon=!0}})}},315:function(e,t,i){t=e.exports=i(7)(),t.push([e.i,".upload_img_pane[data-v-9679b6b8]{width:150px;height:150px;border-radius:5px;border:1px dashed #dcdcdc;display:flex;align-items:center;justify-content:center;position:relative;background:#fbfdff;font-size:24px;color:#666}.upload_img_pane[data-v-9679b6b8]:hover{border:1px dashed #2196f3}.upload_file[data-v-9679b6b8]{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;opacity:0}.slide-fade-enter-active[data-v-9679b6b8]{transition:all .3s ease}.slide-fade-leave-active[data-v-9679b6b8]{transition:all .3s cubic-bezier(1,.5,.8,1)}.slide-fade-enter[data-v-9679b6b8],.slide-fade-leave-to[data-v-9679b6b8]{transform:translateY(10px);opacity:0}",""])},317:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload_img_wrap"},[i("div",{staticClass:"upload_img_pane"},[e.showIcon?i("i",{staticClass:"el-icon-plus"}):i("i",{staticClass:"el-icon-loading"}),e._v(" "),i("input",{ref:"imgUpload",staticClass:"upload_file",attrs:{type:"file",name:""},on:{change:function(t){e.uploadFn()}}})])])},staticRenderFns:[]}},318:function(e,t,i){var a=i(315);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(11)("69ae6db8",a,!0)},325:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"list-item",data:function(){return{showIcon:!1,showDetail:!1,state:!1,indexlabel:""}},props:{index:null,code:null,name:{type:String,default:"默认"},listType:{type:String,default:"默认"},showListType:{type:Boolean,default:!0},showDetailParent:{type:Boolean,default:!1}},watch:{code:function(e,t){e==this.index?this.state=!0:this.state=!1}},methods:{mouseIn:function(){this.showIcon=!0,this.showDetail=!0},mouseOut:function(){this.showIcon=!1,this.showDetail=!1},deleteItemFn:function(){this.$emit("deleteItem")},lookDetail:function(){this.$emit("lookDetail")},pickFn:function(){this.$emit("select",this.index)}}}},326:function(e,t,i){e.exports={default:i(327),__esModule:!0}},327:function(e,t,i){var a=i(5),o=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},328:function(e,t,i){t=e.exports=i(7)(),t.push([e.i,".list_item_wrap[data-v-2a55c3ba]{display:flex;align-items:center;justify-content:space-between;padding:10px}.list_item_wrap[data-v-2a55c3ba]:hover{background:#eef1f6}.list_item_content[data-v-2a55c3ba]{display:flex;align-items:center}.list_item_content img[data-v-2a55c3ba]{width:40px;height:40px;border-radius:20px}.text_pane[data-v-2a55c3ba]{margin-left:10px;color:#333;min-width:100px}.text_type[data-v-2a55c3ba]{font-size:12px}.pick_color[data-v-2a55c3ba]{color:#2196f3}.delete_icon[data-v-2a55c3ba]{padding:5px}",""])},330:function(e,t,i){i(332);var a=i(9)(i(325),i(331),"data-v-2a55c3ba",null);e.exports=a.exports},331:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"list_item_wrap underline",on:{mouseenter:e.mouseIn,mouseleave:e.mouseOut}},[i("div",{staticClass:"list_item_content"},[e._t("default",[i("img",{attrs:{src:"http://oo6gk8wuu.bkt.clouddn.com/header1.jpg"}})]),e._v(" "),i("div",{staticClass:"text_pane",class:{pick_color:e.state}},[i("p",[e._v(e._s(e.name))]),e._v(" "),e.showListType?i("p",{staticClass:"text_type"},[e._v(e._s(e.listType))]):e._e()])],2),e._v(" "),e.showDetail&&e.showDetailParent?i("div",{staticClass:"delete_icon"},[e._t("deleteIcon",[i("i",{staticClass:"el-icon-edit",on:{click:function(t){t.stopPropagation(),e.lookDetail(t)}}})])],2):e._e(),e._v(" "),e.showIcon?i("div",{staticClass:"delete_icon"},[e._t("deleteIcon",[i("i",{staticClass:"el-icon-circle-close",on:{click:function(t){t.stopPropagation(),e.deleteItemFn(t)}}})])],2):e._e()])},staticRenderFns:[]}},332:function(e,t,i){var a=i(328);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(11)("9ae1ef20",a,!0)},870:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(326),o=i.n(a),n=i(22),s=i.n(n),r=i(330),l=i.n(r),c=i(63),m=i.n(c),p=i(313),d=i.n(p),g=i(26),u=i(29);t.default={name:"priduct-game",components:{"product-item":l.a,"image-card":m.a,"add-img-item":d.a},data:function(){var e=function(e,t,i){t?i():i(new Error("图片不能为空"))};return{topicDialogFormVisible:!1,gameDialogFormVisible:!1,switchImage:!0,preUrl:sessionStorage.getItem("imageUrl"),leftLoading:!1,loading:!1,listTotal:0,pageSize:20,currentpage:1,topList:[],gameList:[],topicId:"",gameId:"",searchTopName:"",tagsOptions:[],listShow:!1,topicForm:{name:"",subName:"",imageBig:"",enable:!0,fixedTop:!0},topicFormRules:{name:[{required:!0,message:"请输入标题",trigger:"blur"},{min:1,max:40,message:"不超过40个字符",trigger:"blur"}],subName:[{required:!0,message:"请输入副标题",trigger:"blur"},{min:1,max:40,message:"不超过40个字符",trigger:"blur"}],imageBig:[{required:!0,validator:e,trigger:"blur"}]},gameFormForm:{name:"",linkUrl:"",imageBig:"",description:""},gameFormFormRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:40,message:"不超过40个字符",trigger:"blur"}],linkUrl:[{required:!0,message:"请输入链接",trigger:"blur"}],imageBig:[{required:!0,validator:e,trigger:"blur"}]}}},computed:s()({},i.i(g.c)(["get_banner_img"])),methods:s()({},i.i(g.b)(["set_banner_img"]),{getSectionList:function(e){var t=this;u.a.h5TopicList(e).then(function(e){"0"==e.data.code&&(t.topList=e.data.data)})},searchTopic:function(){var e={};this.searchTopName&&""!=this.searchTopName&&(e.name=this.searchTopName),this.getSectionList(e)},addTopic:function(){this.topicId="",this.switchImage=!0,this.topicDialogFormVisible=!0,this.listShow=!1},addGame:function(){this.gameId="",this.switchImage=!0,this.gameDialogFormVisible=!0},callbackImage:function(){this.switchImage=!1,this.topicForm.imageBig=this.get_banner_img.path,this.set_banner_img({})},deleteImageFn:function(){this.$set(this.topicForm,"imageBig",""),this.switchImage=!0},callbackGameImage:function(){this.switchImage=!1,this.gameFormForm.imageBig=this.get_banner_img.path,this.set_banner_img({})},deleteGameImageFn:function(){this.$set(this.gameFormForm,"imageBig",""),this.switchImage=!0},removeLabel:function(e){this.tagsOptions.splice(e,1)},addLabel:function(){var e=this;this.$prompt("请输入标签",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var i=t.value;e.tagsOptions.push(i)}).catch(function(){})},cancelTopic:function(){this.topicDialogFormVisible=!1,this.switchImage=!0,this.tagsOptions=[],this.topicForm={name:"",subName:"",imageBig:"",enable:!0,fixedTop:!0}},saveTopic:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var i={name:t.topicForm.name,subName:t.topicForm.subName,imageBig:t.topicForm.imageBig,enable:t.topicForm.enable?1:0,fixedTop:t.topicForm.fixedTop?1:0};t.tagsOptions&&t.tagsOptions.length>0&&(i.tags=o()(t.tagsOptions)),t.topicId&&""!=t.topicId?(i.id=t.topicId,u.a.h5TopicUpdate(i).then(function(e){if("0"==e.data.code){t.cancelTopic();var i={};t.searchTopName&&""!=t.searchTopName&&(i.name=t.searchTopName),t.getSectionList(i)}})):u.a.h5TopicInsert(i).then(function(e){if("0"==e.data.code){t.cancelTopic();var i={};t.searchTopName&&""!=t.searchTopName&&(i.name=t.searchTopName),t.getSectionList(i)}})}else t.$message("信息不完整")})},cancelGame:function(){this.gameDialogFormVisible=!1,this.switchImage=!0,this.gameFormForm={name:"",linkUrl:"",imageBig:"",description:""}},saveGame:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var i={name:t.gameFormForm.name,linkUrl:t.gameFormForm.linkUrl,imageBig:t.gameFormForm.imageBig,topicId:t.topicId};t.gameFormForm.description&&(i.description=t.gameFormForm.description),t.gameId&&""!=t.gameId?(i.id=t.gameId,u.a.h5ContentUpdate(i).then(function(e){"0"==e.data.code&&(t.cancelGame(),t.pickTopic(t.topicId))})):u.a.h5ContentInsert(i).then(function(e){"0"==e.data.code&&(t.cancelGame(),t.pickTopic(t.topicId))})}else t.$message("信息不完整")})},updateTopic:function(e){var t=this;this.topicId=e,u.a.h5Topicdetail({id:e}).then(function(e){if("0"==e.data.code){var i=e.data.data;t.topicForm={name:i.name,subName:i.subName,enable:!!i.enable,fixedTop:!!i.fixedTop},i.imageBig&&"null"!=i.imageBig&&(t.topicForm.imageBig=i.imageBig,t.switchImage=!1);try{t.tagsOptions=JSON.parse(i.tags),t.tagsOptions||(t.tagsOptions=[])}catch(e){t.tagsOptions=[]}t.topicDialogFormVisible=!0}})},pickTopic:function(e){var t=this;this.topicId=e,u.a.h5ContentList({topicId:e}).then(function(e){"0"==e.data.code&&(t.gameList=e.data.data,t.listShow=!0)})},updateGame:function(e){var t=this;this.gameId=e,u.a.h5Contentdetail({id:e}).then(function(e){if("0"==e.data.code){var i=e.data.data;console.log(i),t.gameFormForm={name:i.name,linkUrl:i.linkUrl},i.imageBig&&"null"!=i.imageBig&&(t.gameFormForm.imageBig=i.imageBig,t.switchImage=!1),i.description&&(t.gameFormForm.description=i.description),t.gameDialogFormVisible=!0}})},deleteTopic:function(e){var t=this;this.$confirm("删除后将无法恢复，是否确定删除?").then(function(){u.a.h5TopicDelete({id:e}).then(function(e){if("0"==e.data.code){var i={};t.searchTopName&&""!=t.searchTopName&&(i.name=t.searchTopName),t.getSectionList(i),t.gameList=[],t.topicId="",t.gameId="",t.listShow=!1}})}).catch(function(){})},deleteGame:function(e){var t=this;this.$confirm("删除后将无法恢复，是否确定删除?").then(function(){u.a.h5ContentDelete({id:e}).then(function(e){"0"==e.data.code&&t.pickTopic(t.topicId)})}).catch(function(){})}}),created:function(){this.getSectionList({})}}},899:function(e,t,i){t=e.exports=i(7)(),t.push([e.i,".label_wrap[data-v-0af70ecd]{min-width:100%;background-color:#fff;border-radius:4px;border:1px solid #d8dce5;box-sizing:border-box;color:#5a5e66;display:inline-block;font-size:inherit;min-height:40px;line-height:40px;outline:0;padding:0 15px}.label_item[data-v-0af70ecd]{margin:3px 0 3px 6px;border-color:hsla(220,4%,58%,.2);background-color:rgba(64,158,255,.1);display:inline-block;padding:0 10px;height:32px;line-height:30px;font-size:12px;color:#409eff;border-radius:4px;box-sizing:border-box;border:1px solid rgba(64,158,255,.2);white-space:nowrap}",""])},955:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("page-wrap",{directives:[{name:"loading",rawName:"v-loading.body.lock",value:e.loading,expression:"loading",modifiers:{body:!0,lock:!0}}]},[i("div",{directives:[{name:"loading",rawName:"v-loading.body.sync",value:e.leftLoading,expression:"leftLoading",modifiers:{body:!0,sync:!0}}],attrs:{slot:"sideLeft"},slot:"sideLeft"},[i("div",{staticStyle:{"margin-top":"15px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){t.stopPropagation(),e.addTopic(t)}}},[e._v("新增专题")])],1),e._v(" "),i("div",{staticStyle:{"margin-top":"15px"}},[i("el-input",{attrs:{placeholder:"请输入专题名称"},model:{value:e.searchTopName,callback:function(t){e.searchTopName=t},expression:"searchTopName"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){t.stopPropagation(),e.searchTopic(t)}},slot:"append"})],1)],1),e._v(" "),e._l(e.topList,function(t){return i("product-item",{attrs:{index:t.id,name:t.name,code:e.topicId,showListType:!1,showDetailParent:!0},on:{deleteItem:function(i){e.deleteTopic(t.id)},lookDetail:function(i){e.updateTopic(t.id)}},nativeOn:{click:function(i){e.pickTopic(t.id)}}},[i("img",{attrs:{src:e.preUrl+"/"+t.imageBig}})])})],2),e._v(" "),i("div",{attrs:{slot:"sideRight"},slot:"sideRight"},[e.listShow?i("div",{staticStyle:{width:"40%"}},[i("div",{staticStyle:{"margin-top":"15px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){t.stopPropagation(),e.addGame(t)}}},[e._v("新增游戏")])],1),e._v(" "),e._l(e.gameList,function(t){return i("product-item",{attrs:{index:t.id,name:t.name,code:e.gameId,showListType:!1,showDetailParent:!0},on:{deleteItem:function(i){e.deleteGame(t.id)},lookDetail:function(i){e.updateGame(t.id)}}},[i("img",{attrs:{src:e.preUrl+"/"+t.imageBig}})])})],2):e._e()])]),e._v(" "),i("el-dialog",{attrs:{title:"专题",visible:e.topicDialogFormVisible,width:"60%"},on:{"update:visible":function(t){e.topicDialogFormVisible=t}}},[i("el-form",{ref:"topicFormForm",attrs:{model:e.topicForm,rules:e.topicFormRules}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"标题",prop:"name","label-width":"80px"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.topicForm.name,callback:function(t){e.$set(e.topicForm,"name",t)},expression:"topicForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"简介",prop:"subName","label-width":"80px"}},[i("el-input",{attrs:{placeholder:"请输入简介"},model:{value:e.topicForm.subName,callback:function(t){e.$set(e.topicForm,"subName",t)},expression:"topicForm.subName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"是否有效",required:"","label-width":"80px"}},[i("el-switch",{model:{value:e.topicForm.enable,callback:function(t){e.$set(e.topicForm,"enable",t)},expression:"topicForm.enable"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"是否置顶",required:"","label-width":"80px"}},[i("el-switch",{model:{value:e.topicForm.fixedTop,callback:function(t){e.$set(e.topicForm,"fixedTop",t)},expression:"topicForm.fixedTop"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"主图",prop:"imageBig","label-width":"80px"}},[e.switchImage?i("add-img-item",{attrs:{group:"game"},on:{callbackFn:e.callbackImage}}):i("image-card",{attrs:{showTitle:!1},on:{deleteItem:function(t){e.deleteImageFn()}}},[i("img",{attrs:{src:e.preUrl+"/"+e.topicForm.imageBig}})])],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:24}},[i("el-col",{attrs:{span:13}},[i("el-form-item",{attrs:{label:"标签","label-width":"80px"}},[i("div",{staticClass:"label_wrap"},e._l(e.tagsOptions,function(t,a){return i("span",{staticClass:"label_item"},[e._v(e._s(t)),i("span",{staticClass:"el-icon-error",on:{click:function(t){t.stopPropagation(),e.removeLabel(a)}}})])}))])],1),e._v(" "),i("el-col",{attrs:{span:4}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){t.stopPropagation(),e.addLabel(t)}}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancelTopic}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveTopic("topicFormForm")}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"专题",visible:e.gameDialogFormVisible,width:"60%"},on:{"update:visible":function(t){e.gameDialogFormVisible=t}}},[i("el-form",{ref:"gameFormForm",attrs:{model:e.gameFormForm,rules:e.gameFormFormRules}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"名称",prop:"name","label-width":"80px"}},[i("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.gameFormForm.name,callback:function(t){e.$set(e.gameFormForm,"name",t)},expression:"gameFormForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"链接",prop:"linkUrl","label-width":"80px"}},[i("el-input",{attrs:{placeholder:"请输入链接"},model:{value:e.gameFormForm.linkUrl,callback:function(t){e.$set(e.gameFormForm,"linkUrl",t)},expression:"gameFormForm.linkUrl"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"简介","label-width":"80px"}},[i("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入简介"},model:{value:e.gameFormForm.description,callback:function(t){e.$set(e.gameFormForm,"description",t)},expression:"gameFormForm.description"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"主图",prop:"imageBig","label-width":"80px"}},[e.switchImage?i("add-img-item",{attrs:{group:"game"},on:{callbackFn:e.callbackGameImage}}):i("image-card",{attrs:{showTitle:!1},on:{deleteItem:function(t){e.deleteGameImageFn()}}},[i("img",{attrs:{src:e.preUrl+"/"+e.gameFormForm.imageBig}})])],1)],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancelGame}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveGame("gameFormForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});