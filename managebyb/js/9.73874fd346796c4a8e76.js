webpackJsonp([9],{1003:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"management_wap"},[a("page-wrap",{directives:[{name:"loading",rawName:"v-loading.body.lock",value:e.loading,expression:"loading",modifiers:{body:!0,lock:!0}}]},[a("div",{directives:[{name:"loading",rawName:"v-loading.body.sync",value:e.leftLoading,expression:"leftLoading",modifiers:{body:!0,sync:!0}}],attrs:{slot:"sideLeft"},slot:"sideLeft"},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-input",{attrs:{placeholder:"请输入礼包名称"},model:{value:e.searchGift,callback:function(t){e.searchGift=t},expression:"searchGift"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){t.stopPropagation(),e.searchGiftDetail(t)}},slot:"append"})],1)],1),e._v(" "),e._l(e.giftList,function(t){return a("product-item",{attrs:{index:t.id,name:e.typeComputed(t.name,t.id),showListType:!0,listType:t.gameName},on:{deleteItem:function(a){e.deleteItem(t.id)}},nativeOn:{click:function(a){e.pick(t.id)}}},[a("img",{attrs:{src:e.preUrl+"/"+t.gameLogo}})])}),e._v(" "),a("el-pagination",{attrs:{small:"",layout:"prev, pager, next","page-size":e.pageSize,"current-page":e.currentpage,total:e.listTotal},on:{"current-change":e.giftHandleCurrentChange}})],2),e._v(" "),a("div",{attrs:{slot:"sideRight"},slot:"sideRight"},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-switch",{attrs:{"active-text":"详情","inactive-text":"新增","off-color":"#13ce66",disabled:e.isCode},model:{value:e.switchTurn,callback:function(t){e.switchTurn=t},expression:"switchTurn"}})],1),e._v(" "),a("div",[a("el-form",{ref:"giftItemForm",attrs:{"label-width":"80px",model:e.giftItemForm,rules:e.giftItemRules}},[a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入礼包名称"},model:{value:e.giftItemForm.name,callback:function(t){e.$set(e.giftItemForm,"name",t)},expression:"giftItemForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品",prop:"gameGift"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.giftItemForm.gameGift,callback:function(t){e.$set(e.giftItemForm,"gameGift",t)},expression:"giftItemForm.gameGift"}},e._l(e.gameOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"兑奖码",prop:"name"}},[e.isCode?e._e():a("el-col",{attrs:{span:24}},[a("span",[e._v("兑奖码数量: "+e._s(e.giftItemForm.useAble)+"/"+e._s(e.giftItemForm.sum))])]),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.code},on:{click:function(t){t.stopPropagation(),e.CDKInset(t)}}},[e._v("导入Excel")]),e._v(" "),e.isCode?e._e():a("el-button",{attrs:{type:"text"},on:{click:function(t){t.stopPropagation(),e.showCDKdetail(t)}}},[e._v("查看")]),e._v(" "),e.isCode?e._e():a("el-button",{attrs:{type:"text"},on:{click:function(t){t.stopPropagation(),e.exportCDK(t)}}},[e._v("导出")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"权重",required:""}},[a("el-input",{attrs:{type:"number"},model:{value:e.giftItemForm.weight,callback:function(t){e.$set(e.giftItemForm,"weight",t)},expression:"giftItemForm.weight"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"领取方式",prop:"drawMethod"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.giftItemForm.drawMethod,callback:function(t){e.$set(e.giftItemForm,"drawMethod",t)},expression:"giftItemForm.drawMethod"}},e._l(e.drawMethodOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"礼包时间",required:""}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"beginAt"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"开始时间",disabled:!!e.giftItemForm.isLong},model:{value:e.receiveBeginAt,callback:function(t){e.receiveBeginAt=t},expression:"receiveBeginAt"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"endAt"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"结束时间",disabled:!!e.giftItemForm.isLong},model:{value:e.receiveEndAt,callback:function(t){e.receiveEndAt=t},expression:"receiveEndAt"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:4}},[a("el-form-item",[a("el-checkbox",{model:{value:e.giftItemForm.isLong,callback:function(t){e.$set(e.giftItemForm,"isLong",t)},expression:"giftItemForm.isLong"}},[e._v("长期")])],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"礼包内容",prop:"subName"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入礼包内容"},model:{value:e.giftItemForm.subName,callback:function(t){e.$set(e.giftItemForm,"subName",t)},expression:"giftItemForm.subName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"兑换说明",prop:"usageMethod"}},[a("el-input",{attrs:{placeholder:"请输入兑换说明"},model:{value:e.giftItemForm.usageMethod,callback:function(t){e.$set(e.giftItemForm,"usageMethod",t)},expression:"giftItemForm.usageMethod"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否可用",prop:"enable"}},[a("el-switch",{model:{value:e.giftItemForm.enable,callback:function(t){e.$set(e.giftItemForm,"enable",t)},expression:"giftItemForm.enable"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否置顶",prop:"fixedTop"}},[a("el-switch",{model:{value:e.giftItemForm.fixedTop,callback:function(t){e.$set(e.giftItemForm,"fixedTop",t)},expression:"giftItemForm.fixedTop"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"详情图片",prop:"image"}},[e.showImg?a("add-img-item",{on:{callbackFn:e.callbackFnImg}}):a("image-card",{attrs:{showTitle:!1},on:{deleteItem:e.deleteItemImg}},[a("img",{attrs:{src:e.preUrl+"/"+e.giftItemForm.image}})])],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitGiftForm("giftItemForm")}}},[e._v("保存")])],1)],1)],1)],1)])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"查看兑奖码",visible:e.cdkDataShow},on:{"update:visible":function(t){e.cdkDataShow=t}}},[a("p",{staticClass:"gridTitle"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("p",[e._v("已兑换："+e._s(e.used))])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("p",[e._v("未兑换："+e._s(e.notUsed))])])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body.lock",value:e.cdkDataloading,expression:"cdkDataloading",modifiers:{body:!0,lock:!0}}],staticStyle:{width:"100%"},attrs:{data:e.cdkData,stripe:""},on:{"selection-change":e.cdkSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createAtString",label:"导入时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cdkey",label:"兑换码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"used",label:"状态"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.cdkDelete}},[e._v("批量删除")]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-pagination",{attrs:{"page-size":e.pageSize,"page-sizes":[10],layout:"total, sizes, prev, pager, next, jumper",total:e.cdyTotal},on:{"current-change":e.cdkCurrentChange}})],1)],1)],1)},staticRenderFns:[]}},1051:function(e,t,a){var n=a(943);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(11)("954af96e",n,!0)},276:function(e,t,a){a(1051);var n=a(9)(a(851),a(1003),"data-v-e7cf4132",null);e.exports=n.exports},313:function(e,t,a){a(318);var n=a(9)(a(314),a(317),"data-v-9679b6b8",null);e.exports=n.exports},314:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a.n(n),s=a(63),o=a.n(s),r=a(64),l=a(26);t.default={name:"upload-img-pane",components:{"image-card":o.a},data:function(){return{imageUrl:"",showIcon:!0}},computed:{imgUrl:function(){return sessionStorage.getItem("imageUrl")+"/"+this.imageUrl}},props:{group:{type:String,default:"common"}},methods:i()({},a.i(l.b)(["set_banner_img"]),{uploadFn:function(){var e=this;if(this.showIcon=!1,this.$refs.imgUpload.files.length>0){var t=this.$refs.imgUpload.files[0],a=t.name.split("."),n=a[0],i={name:n,group:this.group,file:t};r.a.insert(i).then(function(t){0==t.data.code?(e.showIcon=!0,e.$message.success("上传成功"),e.imageUrl=t.data.data,e.set_banner_img(t.data.data),e.$emit("callbackFn")):e.$message.error("当期网络不佳，请重试")}).catch(function(){e.showIcon=!0})}else this.showIcon=!0}})}},315:function(e,t,a){t=e.exports=a(7)(),t.push([e.i,".upload_img_pane[data-v-9679b6b8]{width:150px;height:150px;border-radius:5px;border:1px dashed #dcdcdc;display:flex;align-items:center;justify-content:center;position:relative;background:#fbfdff;font-size:24px;color:#666}.upload_img_pane[data-v-9679b6b8]:hover{border:1px dashed #2196f3}.upload_file[data-v-9679b6b8]{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;opacity:0}.slide-fade-enter-active[data-v-9679b6b8]{transition:all .3s ease}.slide-fade-leave-active[data-v-9679b6b8]{transition:all .3s cubic-bezier(1,.5,.8,1)}.slide-fade-enter[data-v-9679b6b8],.slide-fade-leave-to[data-v-9679b6b8]{transform:translateY(10px);opacity:0}",""])},317:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload_img_wrap"},[a("div",{staticClass:"upload_img_pane"},[e.showIcon?a("i",{staticClass:"el-icon-plus"}):a("i",{staticClass:"el-icon-loading"}),e._v(" "),a("input",{ref:"imgUpload",staticClass:"upload_file",attrs:{type:"file",name:""},on:{change:function(t){e.uploadFn()}}})])])},staticRenderFns:[]}},318:function(e,t,a){var n=a(315);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(11)("69ae6db8",n,!0)},320:function(e,t,a){"use strict";function n(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var n in a)if(new RegExp("("+n+")").test(t)){var s=a[n]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?s:i(s))}return t}function i(e){return("00"+e).substr(e.length)}function s(e){var t=e,a=t[0].getFullYear(),n=t[1].getFullYear(),i=t[0].getMonth()+1<10?"0"+(t[0].getMonth()+1):t[0].getMonth()+1,s=t[1].getMonth()+1<10?"0"+(t[1].getMonth()+1):t[1].getMonth()+1;return{begin:a+"-"+i+"-"+(t[0].getDate()<10?"0"+t[0].getDate():t[0].getDate())+" 00:00:00",end:n+"-"+s+"-"+(t[1].getDate()<10?"0"+t[1].getDate():t[1].getDate())+" 23:59:59"}}t.a=n,t.b=s},325:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"list-item",data:function(){return{showIcon:!1,showDetail:!1,state:!1,indexlabel:""}},props:{index:null,code:null,name:{type:String,default:"默认"},listType:{type:String,default:"默认"},showListType:{type:Boolean,default:!0},showDetailParent:{type:Boolean,default:!1}},watch:{code:function(e,t){e==this.index?this.state=!0:this.state=!1}},methods:{mouseIn:function(){this.showIcon=!0,this.showDetail=!0},mouseOut:function(){this.showIcon=!1,this.showDetail=!1},deleteItemFn:function(){this.$emit("deleteItem")},lookDetail:function(){this.$emit("lookDetail")},pickFn:function(){this.$emit("select",this.index)}}}},326:function(e,t,a){e.exports={default:a(327),__esModule:!0}},327:function(e,t,a){var n=a(5),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},328:function(e,t,a){t=e.exports=a(7)(),t.push([e.i,".list_item_wrap[data-v-2a55c3ba]{display:flex;align-items:center;justify-content:space-between;padding:10px}.list_item_wrap[data-v-2a55c3ba]:hover{background:#eef1f6}.list_item_content[data-v-2a55c3ba]{display:flex;align-items:center}.list_item_content img[data-v-2a55c3ba]{width:40px;height:40px;border-radius:20px}.text_pane[data-v-2a55c3ba]{margin-left:10px;color:#333;min-width:100px}.text_type[data-v-2a55c3ba]{font-size:12px}.pick_color[data-v-2a55c3ba]{color:#2196f3}.delete_icon[data-v-2a55c3ba]{padding:5px}",""])},330:function(e,t,a){a(332);var n=a(9)(a(325),a(331),"data-v-2a55c3ba",null);e.exports=n.exports},331:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list_item_wrap underline",on:{mouseenter:e.mouseIn,mouseleave:e.mouseOut}},[a("div",{staticClass:"list_item_content"},[e._t("default",[a("img",{attrs:{src:"http://oo6gk8wuu.bkt.clouddn.com/header1.jpg"}})]),e._v(" "),a("div",{staticClass:"text_pane",class:{pick_color:e.state}},[a("p",[e._v(e._s(e.name))]),e._v(" "),e.showListType?a("p",{staticClass:"text_type"},[e._v(e._s(e.listType))]):e._e()])],2),e._v(" "),e.showDetail&&e.showDetailParent?a("div",{staticClass:"delete_icon"},[e._t("deleteIcon",[a("i",{staticClass:"el-icon-edit",on:{click:function(t){t.stopPropagation(),e.lookDetail(t)}}})])],2):e._e(),e._v(" "),e.showIcon?a("div",{staticClass:"delete_icon"},[e._t("deleteIcon",[a("i",{staticClass:"el-icon-circle-close",on:{click:function(t){t.stopPropagation(),e.deleteItemFn(t)}}})])],2):e._e()])},staticRenderFns:[]}},332:function(e,t,a){var n=a(328);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(11)("9ae1ef20",n,!0)},343:function(e,t,a){"use strict";var n=a(62),i={gameInsert:"management/api/game/insert",gameDetail:"management/api/game/detail",gameDelete:"management/api/game/delete",gameList:"management/api/game/list",gameUpdate:"management/api/game/update",searchByName:"management/api/game/searchByName",liveInsert:"management/api/live/insert",liveDetail:"management/api/live/detail",liveDelete:"management/api/live/delete",liveUpdate:"management/api/live/update",liveList:"/management/api/live/list",businessInsert:"management/api/business/insert",businessDetail:"management/api/business/detail",businessDelete:"management/api/business/delete",businessList:"management/api/business/list",businessUpdate:"management/api/business/update",convenienceInsert:"management/api/convenience/insert",convenienceDelete:"management/api/convenience/delete",convenienceList:"management/api/convenience/list",convenienceUpdate:"management/api/convenience/update",hotList:"management/api/search/list",hotDelete:"management/api/search/delete",hotInsert:"management/api/search/insert",hotUpdate:"management/api/search/update",novelList:"management/api/novel/list",novelDetail:"management/api/novel/detail",novelInsert:"management/api/novel/insert",novelDelete:"management/api/novel/delete",novelUpdate:"management/api/novel/update",cartoonList:"management/api/cartoon/list",cartoonDetail:"management/api/cartoon/detail",cartoonInsert:"management/api/cartoon/insert",cartoonDelete:"management/api/cartoon/delete",cartoonUpdate:"management/api/cartoon/update"};t.a={gameInsert:function(e){return n.a.post(i.gameInsert,e)},gameDetail:function(e){return n.a.get(i.gameDetail,e)},gameDelete:function(e){return n.a.post(i.gameDelete,e)},gameList:function(e){return n.a.get(i.gameList,e)},gameUpdate:function(e){return n.a.post(i.gameUpdate,e)},searchByName:function(e){return n.a.get(i.searchByName,e)},liveInsert:function(e){return n.a.post(i.liveInsert,e)},liveDetail:function(e){return n.a.get(i.liveDetail,e)},liveDelete:function(e){return n.a.post(i.liveDelete,e)},liveList:function(e){return n.a.get(i.liveList,e)},liveUpdate:function(e){return n.a.post(i.liveUpdate,e)},businessInsert:function(e){return n.a.post(i.businessInsert,e)},businessDetail:function(e){return n.a.get(i.businessDetail,e)},businessDelete:function(e){return n.a.post(i.businessDelete,e)},businessList:function(e){return n.a.get(i.businessList,e)},businessUpdate:function(e){return n.a.post(i.businessUpdate,e)},convenienceInsert:function(e){return n.a.post(i.convenienceInsert,e)},convenienceList:function(e){return n.a.get(i.convenienceList,e)},convenienceUpdate:function(e){return n.a.post(i.convenienceUpdate,e)},convenienceDelete:function(e){return n.a.post(i.convenienceDelete,e)},hotList:function(e){return n.a.get(i.hotList,e)},hotDelete:function(e){return n.a.post(i.hotDelete,e)},hotInsert:function(e){return n.a.post(i.hotInsert,e)},hotUpdate:function(e){return n.a.post(i.hotUpdate,e)},novelList:function(e){return n.a.get(i.novelList,e)},novelDetail:function(e){return n.a.get(i.novelDetail,e)},novelInsert:function(e){return n.a.post(i.novelInsert,e)},novelDelete:function(e){return n.a.post(i.novelDelete,e)},novelUpdate:function(e){return n.a.post(i.novelUpdate,e)},cartoonList:function(e){return n.a.get(i.cartoonList,e)},cartoonDetail:function(e){return n.a.get(i.cartoonDetail,e)},cartoonInsert:function(e){return n.a.post(i.cartoonInsert,e)},cartoonDelete:function(e){return n.a.post(i.cartoonDelete,e)},cartoonUpdate:function(e){return n.a.post(i.cartoonUpdate,e)}}},420:function(e,t,a){"use strict";var n=a(62),i={cancelAfter:"management/api/package/cancelAfter",cdKeyInsert:"management/api/package/cdKeyInsert",cdKeyList:"management/api/package/cdKeyList",cdKeysDelete:"management/api/package/cdKeysDelete",packageDelete:"management/api/package/delete",packageDetail:"management/api/package/detail",packageExport:"management/api/package/cdkeyExport",findCdKey:"management/api/package/findCdKey",packageInsert:"management/api/package/insert",packageList:"management/api/package/list",packagesAndDownloads:"/management/api/package/packagesAndDownloads",packageUpdate:"management/api/package/update",gameList:"management/api/game/gameList"};t.a={cancelAfter:function(e){return n.a.post(i.cancelAfter,e)},cdKeyInsert:function(e){return n.a.post(i.cdKeyInsert,e)},cdKeyList:function(e){return n.a.get(i.cdKeyList,e)},cdKeysDelete:function(e){return n.a.post(i.cdKeysDelete,e)},packageDelete:function(e){return n.a.post(i.packageDelete,e)},packageDetail:function(e){return n.a.get(i.packageDetail,e)},packageExport:function(e){return n.a.get(i.packageExport,e)},findCdKey:function(e){return n.a.get(i.findCdKey,e)},packageInsert:function(e){return n.a.post(i.packageInsert,e)},packageList:function(e){return n.a.get(i.packageList,e)},packagesAndDownloads:function(e){return n.a.get(i.packagesAndDownloads,e)},packageUpdate:function(e){return n.a.post(i.packageUpdate,e)},gameList:function(e){return n.a.get(i.gameList,e)}}},851:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(326),i=a.n(n),s=a(22),o=a.n(s),r=a(881),l=a.n(r),c=a(420),d=(a(343),a(313)),g=a.n(d),m=a(63),p=a.n(m),u=a(26),f=a(330),h=a.n(f),v=a(320),b=a(92);a.n(b);t.default={name:"management-gift",components:{"product-item":h.a,"add-img-item":g.a,"image-card":p.a},data:function(){var e,t=function(e,t,a){t?a():a(new Error("礼包图片不能为空"))};return e={preUrl:sessionStorage.getItem("imageUrl"),showImg:!0,loading:!1,leftLoading:!1,cdkDataShow:!1,cdkDataloading:!1,cdyTotal:0,cdkData:[],used:0,notUsed:0,currentpage:1,cdkCurrentPage:1,pageSize:10,searchGift:"",switchTurn:!1,code:"",giftList:[]},l()(e,"preUrl",sessionStorage.getItem("imageUrl")),l()(e,"listTotal",0),l()(e,"gameOptions",[]),l()(e,"imgData",{}),l()(e,"receiveBeginAt",""),l()(e,"receiveEndAt",""),l()(e,"drawMethodOptions",[{name:"登录",id:"0"}]),l()(e,"cdkSelection",[]),l()(e,"giftItemForm",{name:"",gameGift:"",weight:50,drawMethod:"0",isLong:0,subName:"",usageMethod:"",enable:!0,fixedTop:!0,image:"",useAble:0,sum:0}),l()(e,"giftItemRules",{name:[{required:!0,message:"请输入名称",trigger:"blur"}],gameGift:[{required:!0,message:"请选择产品",trigger:"blur"}],drawMethod:[{required:!0,message:"请输入领取方式",trigger:"blur"}],subName:[{required:!0,message:"请输入礼包内容",trigger:"blur"}],usageMethod:[{required:!0,message:"请输入领取方式",trigger:"blur"}],enable:[{required:!0,message:"请选择状态",trigger:"change"}],fixedTop:[{required:!0,message:"请选择状态",trigger:"change"}],image:[{required:!0,validator:t,trigger:"blur"}]}),e},created:function(){this.getGiftList({pageSize:this.pageSize,page:1}),this.getGameOptions()},computed:o()({},a.i(u.c)(["get_banner_img","get_product_list"]),{isCode:function(){return!this.code||""==this.code}}),watch:{switchTurn:function(e,t){e||this.resetAll("giftItemForm")}},methods:o()({},a.i(u.b)(["set_banner_img","set_product_list"]),{getGiftList:function(e){var t=this;this.leftLoading=!0,c.a.packageList(e).then(function(e){"0"==e.data.code&&(t.giftList=e.data.data.list,t.listTotal=e.data.data.count,t.leftLoading=!1)})},getGameOptions:function(){var e=this;c.a.gameList().then(function(t){0==t.data.code&&(e.gameOptions=t.data.data)})},typeComputed:function(e,t){return e},giftHandleCurrentChange:function(e){var t={page:e,pageSize:this.pageSize};this.searchGift&&(t.packageName=this.searchGift),this.getGiftList(t),this.currentpage=e},deleteItem:function(e){var t=this;this.$confirm("删除后将无法恢复，是否确定删除?").then(function(){c.a.packageDelete({id:e}).then(function(e){"0"==e.data.code?(t.giftHandleCurrentChange(t.currentpage),t.loading=!1,t.switchTurn=!1,t.set_banner_img({}),t.set_product_list([]),t.code=""):t.$message("当前网络不佳，请稍后重试")})}).catch(function(){})},searchGiftDetail:function(){var e={page:1,pageSize:this.pageSize};this.searchGift&&(e.packageName=this.searchGift),this.getGiftList(e)},pick:function(e){this.code=e,this.switchTurn=!0,this.getGiftDetail({id:e})},getGiftDetail:function(e){var t=this;c.a.packageDetail(e).then(function(e){if("0"==e.data.code){var a=e.data.data;t.giftItemForm={name:a.name,gameGift:a.gameId,weight:a.weight,isLong:!!a.isLong,subName:a.subName,usageMethod:a.usageMethod,enable:!!a.enable,fixedTop:!!a.fixedTop,useAble:a.useAble,sum:a.sum};a.isLong?(t.receiveBeginAt="",t.receiveEndAt=""):(t.receiveBeginAt=a.receiveBeginAt,t.receiveEndAt=a.receiveEndAt),a.image&&"null"!=a.image?(t.giftItemForm.image=a.image,t.showImg=!1):t.showImg=!0,0!=a.drawMethod&&a.drawMethod||(t.giftItemForm.drawMethod="0")}})},submitGiftForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var n={name:t.giftItemForm.name,gameId:t.giftItemForm.gameGift,weight:t.giftItemForm.weight,drawMethod:Number(t.giftItemForm.drawMethod),isLong:t.giftItemForm.isLong?1:0,subName:t.giftItemForm.subName,usageMethod:t.giftItemForm.usageMethod,enable:t.giftItemForm.enable?1:0,fixedTop:t.giftItemForm.fixedTop?1:0,image:t.giftItemForm.image};if(!t.giftItemForm.isLong){var i=new Date(t.receiveBeginAt),s=new Date(t.receiveEndAt);n.receiveBeginAt=a.i(v.a)(i,"yyyy-MM-dd hh:mm:ss"),n.receiveEndAt=a.i(v.a)(s,"yyyy-MM-dd hh:mm:ss")}t.code&&""!=!!t.code?(n.id=t.code,c.a.packageUpdate(n).then(function(e){if("0"==e.data.code){t.$message.success("更新成功"),t.switchTurn=!1;var a={pageSize:t.pageSize,page:t.currentpage};t.getGiftList(a)}else t.$message.error("当前网络不佳，请稍后重试")})):c.a.packageInsert(n).then(function(e){if("0"==e.data.code){t.$message.success("新增成功"),t.resetAll("giftItemForm");var a={pageSize:t.pageSize,page:t.currentpage};t.getGiftList(a)}else t.$message.error("当前网络不佳，请稍后重试")})}else t.$message("信息不完整")})},callbackFnImg:function(){this.showImg=!1,this.imgData=this.get_banner_img,this.giftItemForm.image=this.imgData.path},deleteItemImg:function(e){var t=this;this.$confirm("确定删除选中项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.showImg=!0,t.imgData={},t.giftItemForm.image=null})},resetAll:function(e){this.$refs[e].resetFields(),this.code="",this.set_banner_img({}),this.set_product_list([]),this.showImg=!0,this.receiveBeginAt="",this.receiveEndAt=""},CDKInset:function(){var e=this,t=document.createElement("input");t.type="file",t.accept=".xls,.xlsx",t.click(),t.addEventListener("change",function(a){var n=t.files[0],i={packageId:e.code,gameId:e.giftItemForm.gameGift,file:n},s=b.Loading.service({fullscreen:!0,text:"上传CDK中..."});c.a.cdKeyInsert(i).then(function(t){"0"==t.data.code?(s.close(),e.$message.success("CDK上传成功"),e.getGiftDetail({id:e.code})):e.$message.error(t.data.userMessage)})})},cdkSelectionChange:function(e){var t=[];e.forEach(function(e){t.push(e.id)}),this.cdkSelection=t},cdkDelete:function(){var e=this,t={id:i()(this.cdkSelection)};c.a.cdKeysDelete(t).then(function(t){"0"==t.data.code&&(e.cdkSelection=[],e.$message.success("删除成功"),e.cdkCurrentChange(e.cdkCurrentPage),e.getGiftDetail({id:e.code}))})},showCDKdetail:function(){var e={packageId:this.code,gameId:this.giftItemForm.gameGift,pageSize:this.pageSize};this.getCDKlist(e)},cdkCurrentChange:function(e){var t={packageId:this.code,gameId:this.giftItemForm.gameGift,pageSize:this.pageSize,page:e};this.cdkCurrentPage=e,this.getCDKlist(t)},getCDKlist:function(e){var t=this;this.cdkDataShow=!0,this.cdkDataloading=!0,c.a.cdKeyList(e).then(function(e){if("0"==e.data.code){var a=e.data.data.list;t.notUsed=e.data.data.notUsed,t.used=e.data.data.used,t.cdyTotal=e.data.data.count,a.forEach(function(e){e.used=e.used?"已兑换":"未兑换"}),t.cdkData=a,t.cdkDataloading=!1}})},exportCDK:function(){var e=this,t={packageId:this.code,gameId:this.giftItemForm.gameGift};c.a.packageExport(t).then(function(t){e.$confirm("是否下载？").then(function(){var e=sessionStorage.getItem("cdkeyExportUrl");window.location.href=e}).catch(function(){})})}})}},879:function(e,t,a){e.exports={default:a(882),__esModule:!0}},881:function(e,t,a){"use strict";t.__esModule=!0;var n=a(879),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,a){return t in e?(0,i.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},882:function(e,t,a){a(893);var n=a(5).Object;e.exports=function(e,t,a){return n.defineProperty(e,t,a)}},893:function(e,t,a){var n=a(12);n(n.S+n.F*!a(14),"Object",{defineProperty:a(13).f})},943:function(e,t,a){t=e.exports=a(7)(),t.push([e.i,".line[data-v-e7cf4132]{text-align:center}",""])}});