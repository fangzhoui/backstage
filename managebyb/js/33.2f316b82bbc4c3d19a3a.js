webpackJsonp([33],{1019:function(e,t,a){var r=a(911);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(11)("68d382da",r,!0)},271:function(e,t,a){a(1019);var r=a(9)(a(846),a(967),"data-v-27b7ec18",null);e.exports=r.exports},320:function(e,t,a){"use strict";function r(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var r in a)if(new RegExp("("+r+")").test(t)){var o=a[r]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?o:s(o))}return t}function s(e){return("00"+e).substr(e.length)}function o(e){var t=e,a=t[0].getFullYear(),r=t[1].getFullYear(),s=t[0].getMonth()+1<10?"0"+(t[0].getMonth()+1):t[0].getMonth()+1,o=t[1].getMonth()+1<10?"0"+(t[1].getMonth()+1):t[1].getMonth()+1;return{begin:a+"-"+s+"-"+(t[0].getDate()<10?"0"+t[0].getDate():t[0].getDate())+" 00:00:00",end:r+"-"+o+"-"+(t[1].getDate()<10?"0"+t[1].getDate():t[1].getDate())+" 23:59:59"}}t.a=r,t.b=o},370:function(e,t,a){"use strict";var r=a(62),s={usersScores:"management/commodity/usersScores",scoreFind:"management/commodity/scoreFind",scoresDetail:"management/commodity/scoresDetail",goodsList:"management/commodity/list",searchCommodity:"management/commodity/searchCommodity",goodsDelete:"management/commodity/batch/delete",goodsDown:"management/commodity/batch/down",goodsUp:"management/commodity/batch/up",goodsDetail:"management/commodity/detail",goodsInsert:"management/commodity/insert",goodsUpdate:"management/commodity/update",orderList:"management/commodity/orderList",expressList:"management/commodity/expressList",getcdkey:"management/commodity/cdKeyList",changeOrder:"management/commodity/changeOrder",orderFind:"management/commodity/orderFind",usersExport:"management/commodity/usersExport",ordersExport:"management/commodity/ordersExport",cdKeyList:"management/commodity/cdKeyList",cdkInsert:"management/commodity/packageBatch/insert",cdKeysDelete:"management/commodity/cdKeysDelete",outputCdk:"management/commodity/packageBatch/output"};t.a={usersScores:function(e){return r.a.get(s.usersScores,e)},scoreFind:function(e){return r.a.get(s.scoreFind,e)},scoresDetail:function(e){return r.a.get(s.scoresDetail,e)},goodsList:function(e){return r.a.get(s.goodsList,e)},searchCommodity:function(e){return r.a.get(s.searchCommodity,e)},goodsDelete:function(e){return r.a.post(s.goodsDelete,e)},goodsDown:function(e){return r.a.post(s.goodsDown,e)},goodsUp:function(e){return r.a.post(s.goodsUp,e)},goodsDetail:function(e){return r.a.get(s.goodsDetail,e)},goodsInsert:function(e){return r.a.post(s.goodsInsert,e)},goodsUpdate:function(e){return r.a.post(s.goodsUpdate,e)},orderList:function(e){return r.a.get(s.orderList,e)},expressList:function(e){return r.a.get(s.expressList,e)},getcdkey:function(e){return r.a.get(s.getcdkey,e)},changeOrder:function(e){return r.a.post(s.changeOrder,e)},orderFind:function(e){return r.a.get(s.orderFind,e)},usersExport:function(e){return r.a.get(s.usersExport,e)},ordersExport:function(e){return r.a.get(s.ordersExport,e)},cdKeyList:function(e){return r.a.get(s.cdKeyList,e)},cdkInsert:function(e){return r.a.post(s.cdkInsert,e)},cdKeysDelete:function(e){return r.a.post(s.cdKeysDelete,e)},outputCdk:function(e){return r.a.get(s.outputCdk,e)}}},846:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(65),s=a.n(r),o=a(370),n=a(320);t.default={name:"order-list",data:function(){return{loading:!1,pageSize:10,currentpage:1,page:"",time:"",tableData:[],dataTotal:null,typeSelect:[{name:"流量",type:"0"},{name:"兑奖码",type:"1"},{name:"实物寄送",type:"2"}],sendSelect:[{name:"未发货",type:"0"},{name:"已发货",type:"1"},{name:"已充值",type:"2"},{name:"已兑换",type:"3"}],userId:"",goodName:"",typeSelectKey:"",sendSelectKey:"",goodSelection:[],orderVisible:!1,orderVisibleTitle:"",adressfrom:{name:"",region:""},expressListMap:[],formLabelWidth:"120px",cdkey:"",selectOrder:null}},methods:{orderSizeChange:function(){},orderCurrentChange:function(e){this.page=e;var t={page:e,pageSize:this.pageSize};if(""!=this.goodName&&(t.name=this.goodName),""!=this.userId&&(t.phone=this.userId),""!=this.typeSelectKey&&"all"!=this.typeSelectKey&&(t.type=Number(this.typeSelectKey)),""!=this.sendSelectKey&&"all"!=this.sendSelectKey&&(t.useState=Number(this.sendSelectKey)),""!=this.time&&null!=this.time&&void 0!=this.time){var a=this.time,r=a[0].getFullYear(),s=a[1].getFullYear(),o=a[0].getMonth()+1<10?"0"+(a[0].getMonth()+1):a[0].getMonth()+1,n=a[1].getMonth()+1<10?"0"+(a[1].getMonth()+1):a[1].getMonth()+1,i=a[0].getDate()<10?"0"+a[0].getDate():a[0].getDate(),d=a[1].getDate()<10?"0"+a[1].getDate():a[1].getDate(),l=r+"-"+o+"-"+i+" 00:00:00",c=s+"-"+n+"-"+d+" 23:59:59";t.timeBegin=l,t.timeEnd=c}this.searchFn(t)},goodsSelectionChange:function(e){this.goodSelection=e},search:function(){var e={pageSize:this.pageSize};if(""!=this.goodName&&(e.name=this.goodName),""!=this.userId&&(e.phone=this.userId),""!=this.typeSelectKey&&"all"!=this.typeSelectKey&&(e.type=Number(this.typeSelectKey)),""!=this.sendSelectKey&&"all"!=this.sendSelectKey&&(e.useState=Number(this.sendSelectKey)),""!=this.time&&null!=this.time&&void 0!=this.time){var t=this.time,a=t[0].getFullYear(),r=t[1].getFullYear(),s=t[0].getMonth()+1<10?"0"+(t[0].getMonth()+1):t[0].getMonth()+1,o=t[1].getMonth()+1<10?"0"+(t[1].getMonth()+1):t[1].getMonth()+1,n=t[0].getDate()<10?"0"+t[0].getDate():t[0].getDate(),i=t[1].getDate()<10?"0"+t[1].getDate():t[1].getDate(),d=a+"-"+s+"-"+n+" 00:00:00",l=r+"-"+o+"-"+i+" 23:59:59";e.timeBegin=d,e.timeEnd=l}this.searchFn(e)},searchFn:function(e){var t=this;t.loading=!0,o.a.orderFind(e).then(function(e){var r=[],o=e.data.data.commodityRecords,i=!0,d=!1,l=void 0;try{for(var c,m=s()(o);!(i=(c=m.next()).done);i=!0){var u=c.value,g=new Date(u.createAt),p="";switch(u.commodityType){case 0:p="流量";break;case 1:p="兑奖码";break;case 2:p="实物寄送";break;case 3:p="抽奖机会"}var h="",y="";switch(u.useState){case 0:h="未发货",y="发货";break;case 1:h="已发货",y="物流";break;case 2:h="已充值",y="";break;case 3:h="已兑换",y="查看兑换码";break;case 4:h="已发货",y=""}var f="";null!=u.userAddress&&(u.userAddress.provinceName&&(f=u.userAddress.provinceName),u.userAddress.cityName&&(f+=u.userAddress.cityName),u.userAddress.districtName&&(f+=u.userAddress.districtName),u.userAddress.address&&(f+=u.userAddress.address),u.userAddress.postcode&&(f+=","+u.userAddress.postcode),u.userAddress.receiver&&(f+=","+u.userAddress.receiver),u.userAddress.phone&&(f+=","+u.userAddress.phone));var v="";u.expressName&&(v=u.expressName),u.expressNo&&(v+=","+u.expressNo);var b={updateAt:a.i(n.a)(g,"yyyy-MM-dd hh:mm:ss"),phone:u.phone,name:u.name,commodityType:p,orderNumber:1,address:f,addressMsg:v,orderStatus:"交易成功",grantStatus:h,operation:y,cdkey:u.packageKey,id:u.id};u.score&&"null"!=u.score&&"undefined"!=u.score?b.score=u.score+"分":b.score="0分",r.push(b)}}catch(e){d=!0,l=e}finally{try{!i&&m.return&&m.return()}finally{if(d)throw l}}t.loading=!1,t.tableData=r,t.dataTotal=e.data.data.count})},orderEdit:function(e,t){var a=this;this.selectOrder=t,"物流"==t.operation&&window.open("http://www.kuaidi100.com/"),"发货"==t.operation&&o.a.expressList().then(function(e){if("0"==e.data.code){var t=e.data.data,r=[],o=!0,n=!1,i=void 0;try{for(var d,l=s()(t);!(o=(d=l.next()).done);o=!0){var c=d.value,m={id:c.id,name:c.name};r.push(m)}}catch(e){n=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(n)throw i}}a.expressListMap=r,a.orderVisible=!0,a.orderVisibleTitle="添加快递信息"}}),"查看兑换码"==t.operation&&(this.orderVisible=!0,this.orderVisibleTitle="查看兑换码",this.cdkey=t.cdkey)},addAddress:function(){var e=this;if("添加快递信息"==this.orderVisibleTitle){var t={orderId:this.selectOrder.id};if(""==this.adressfrom.region)return void this.$message.error("请选择快递公司");if(t.expressId=this.adressfrom.region,""==this.adressfrom.name)return void this.$message.error("请输入快递单号");t.expressNo=this.adressfrom.name.toString(),o.a.changeOrder(t).then(function(t){if(0==t.data.code){e.$message({message:"添加成功",type:"success"}),e.orderVisible=!1,e.adressfrom.name="",e.adressfrom.region="";var a={page:e.page,pageSize:e.pageSize};if(""!=e.goodName&&(a.name=e.goodName),""!=e.userId&&(a.phone=e.userId),""!=e.typeSelectKey&&"all"!=e.typeSelectKey&&(a.type=Number(e.typeSelectKey)),""!=e.sendSelectKey&&"all"!=e.sendSelectKey&&(a.useState=Number(e.sendSelectKey)),""!=e.time&&null!=e.time&&void 0!=e.time){var r=e.time,s=r[0].getFullYear(),o=r[1].getFullYear(),n=r[0].getMonth()+1<10?"0"+(r[0].getMonth()+1):r[0].getMonth()+1,i=r[1].getMonth()+1<10?"0"+(r[1].getMonth()+1):r[1].getMonth()+1,d=r[0].getDate()<10?"0"+r[0].getDate():r[0].getDate(),l=r[1].getDate()<10?"0"+r[1].getDate():r[1].getDate(),c=s+"-"+n+"-"+d+" 00:00:00",m=o+"-"+i+"-"+l+" 23:59:59";a.timeBegin=c,a.timeEnd=m}e.searchFn(a)}})}else this.orderVisible=!1},notAddAddress:function(){this.orderVisible=!1,this.adressfrom.name="",this.adressfrom.region=""},exportFn:function(){var e=this,t={};if(""!=this.goodName&&(t.name=this.goodName.trim()),""!=this.userId&&(t.phone=this.userId),""!=this.typeSelectKey&&"all"!=this.typeSelectKey&&(t.type=Number(this.typeSelectKey)),""!=this.sendSelectKey&&"all"!=this.sendSelectKey&&(t.useState=Number(this.sendSelectKey)),""!=this.time&&null!=this.time&&void 0!=this.time){var a=this.time,r=a[0].getFullYear(),s=a[1].getFullYear(),n=a[0].getMonth()+1<10?"0"+(a[0].getMonth()+1):a[0].getMonth()+1,i=a[1].getMonth()+1<10?"0"+(a[1].getMonth()+1):a[1].getMonth()+1,d=a[0].getDate()<10?"0"+a[0].getDate():a[0].getDate(),l=a[1].getDate()<10?"0"+a[1].getDate():a[1].getDate(),c=r+"-"+n+"-"+d+" 00:00:00",m=s+"-"+i+"-"+l+" 23:59:59";t.timeBegin=c,t.timeEnd=m}o.a.ordersExport(t).then(function(t){e.$confirm("是否下载？").then(function(){var e=sessionStorage.getItem("ordersExportUrl");window.location.href=e}).catch(function(){})})}},mounted:function(){this.searchFn({pageSize:this.pageSize})}}},911:function(e,t,a){t=e.exports=a(7)(),t.push([e.i,".history_body[data-v-27b7ec18]{margin-top:20px}.pagenation_pane[data-v-27b7ec18]{padding-top:10px;display:flex;align-items:center;justify-content:center}.btn_wrap[data-v-27b7ec18]{padding-top:20px}.addressTitle[data-v-27b7ec18]{position:absolute;left:15px;top:15px}",""])},967:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-star-on"}),e._v(" 积分商城")]),e._v(" "),a("el-breadcrumb-item",[e._v("订单管理")])],1)],1),e._v(" "),a("div",{staticClass:"history_body"},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",placeholder:"选择日期范围"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{placeholder:"用户账号"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.goodName,callback:function(t){e.goodName=t},expression:"goodName"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"商品类型"},model:{value:e.typeSelectKey,callback:function(t){e.typeSelectKey=t},expression:"typeSelectKey"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),e._v(" "),e._l(e.typeSelect,function(e,t){return a("el-option",{attrs:{label:e.name,value:e.type}})})],2)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"发货状态"},model:{value:e.sendSelectKey,callback:function(t){e.sendSelectKey=t},expression:"sendSelectKey"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),e._v(" "),e._l(e.sendSelect,function(e,t){return a("el-option",{attrs:{label:e.name,value:e.type}})})],2)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{on:{click:e.exportFn}},[e._v("导出Excel")])],1)],1)],1),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body.loak",value:e.loading,expression:"loading",modifiers:{body:!0,loak:!0}}],staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.goodsSelectionChange}},[a("el-table-column",{attrs:{prop:"updateAt",width:"150",label:"交易时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",width:"180",label:"用户手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",width:"160",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"commodityType",width:"160",label:"商品类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNumber",width:"120",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",width:"300",label:"收货信息"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addressMsg",width:"160",label:"快递信息"}}),e._v(" "),a("el-table-column",{attrs:{prop:"score",width:"120",label:"积分"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",width:"160",label:"订单状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grantStatus",width:"160",label:"发放状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operation",width:"120",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){e.orderEdit(t.$index,t.row)}}},[e._v(e._s(t.row.operation))])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagenation_pane"},[a("el-pagination",{attrs:{"page-sizes":[10],"page-size":e.pageSize,"current-page":e.currentpage,layout:"total, sizes, prev, pager, next, jumper",total:e.dataTotal},on:{"size-change":e.orderSizeChange,"current-change":e.orderCurrentChange}})],1)])],1),e._v(" "),a("el-dialog",{attrs:{visible:e.orderVisible},on:{"update:visible":function(t){e.orderVisible=t}}},[a("div",{staticClass:"addressTitle",attrs:{slot:"title"},slot:"title"},[a("h3",[e._v("\n                "+e._s(e.orderVisibleTitle)+"\n            ")])]),e._v(" "),"添加快递信息"==e.orderVisibleTitle?a("el-form",{attrs:{model:e.adressfrom}},[a("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择快递公司"},model:{value:e.adressfrom.region,callback:function(t){e.$set(e.adressfrom,"region",t)},expression:"adressfrom.region"}},e._l(e.expressListMap,function(e,t){return a("el-option",{attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入快递单号"},model:{value:e.adressfrom.name,callback:function(t){e.$set(e.adressfrom,"name",t)},expression:"adressfrom.name"}})],1)],1)],1):a("span",[e._v(e._s(e.cdkey))]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.notAddAddress}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addAddress}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});